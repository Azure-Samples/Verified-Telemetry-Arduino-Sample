
# Getting Started with Verified Telemetry on Arduino

## Table of Contents

* [Verified Telemetry Overview](#verified-telemetry-overview)
* [Links to board specific Device Samples](#sample-setup)
* [Analog and Digital Sensors configuration guide for Verified Telemetry.](#sensor-configuration)
* [Verified Telemetry Concepts](#calibration-and-testing)
* [Verified Telemetry Device Sample](#compatablitity-with-other-boards)

## Verified Telemetry Overview

Verified Telemetry (VT) is a state-of-the-art solution to determine the health of the sensor, i.e., working or faulty, which is consequently used to determine the quality of the sensed data. This is achieved by devising an intelligent “sensor fingerprint”, a set of unique electrical characteristics that differs between working and faulty sensors. The fingerprints can detect faults for a wide variety of off-the-shelf sensors and can be easily implemented with lightweight software code running on the IoT device. VT codebase is described below:

### Verified Telemetry Concepts

A few key concepts of VT are introduced and discussed below:

1. Sensor Fingerprint
    * Sensor fingerprint is an electrical characteristic that is measured by the IoT device for a particular sensor
    * The Sensor fingerprint of a working sensor differs from that of a sensor with fault

1. Sensor Fingerprint Template
    * Sensor fingerprint template is a fingerprint of a working sensor
    * The fingerprint template is collected by the IoT device, ideally when the sensor is provisioned first and stored locally and in the Digital Twin

1. Sensor Fingerprint Collection
    * Sensor Fingerprint Collection is a process where the IoT device measures the fingerprint of a sensor
    * In the device samples, sensor fingerprint is collected at the same frequency at which telemetry is sent by the IoT device

1. Sensor Fingerprint Evaluation
    * A sensor fingerprint that is collected is then compared with the stored sensor fingerprint template
    * If the collected fingerprint matches with the sensor fingerprint template, the sensor is classified as WORKING, otherwise FAULTY

1. Telemetry Status
    * The telemetry status of the telemetry that is generated by the sensor is tagged "true" if the sensor is working and "false" if the sensor has a fault
    * The telemetry status for each telemetry that supports Verified Telemetry feature exists as a non-writable property in the Digital Twin

1. Fingerprint Template Synchronization at Boot
    * If the sensor fingerprint template exists in the Digital Twin, it is fetched and updated on the device when the device boots/resets. This ensures fingerprint template is collected only once when device is provisioned
    * If the sensor fingerprint template does not exist in the Digital Twin, the template on device remains empty after boot and subsequent sensor fingerprint evaluation cannot be performed

| |Description|
|-|-|
|[Verified Telemetry SDK](/Verified-Telemetry) |The SDK which builds on the Arduino middleware and describes how to integrate VT into existing device code. |
|[Verified Telemetry Device Sample](https://github.com/Azure-Samples/Verified-Telemetry-Arduino-Sample) |These Getting Started guides shows device developers how to combine Verified Telemetry with existing Arduino code. |

## Sample Setup

This device sample shows developers how to include Verified Telemetry with you existing Arduino code. This guide is for the ESP8266 based NodeMcu development board, however this sample can also be used to setup other arduino based developement board with minor changes descirbed in [Support for other boards](#compatablitity-with-other-boards):

### Prerequisites

1. ESPRESSIF ESP8266 based NodeMcu board or similar.
    
    The sample is configured to work with ESP8266 based board like the [NodeMcu](https://www.nodemcu.com/index_en.html)

2. Arduino IDE with ESP8266 board support.

    Install the [ESP8266 board support for Arduino](http://arduino.esp8266.com/Arduino/versions/2.0.0/doc/installing.html).

3. Verified Telemetry for Arduino.


    Clone the following repo to download the sample device code, VT Library, and offline versions of the documentation.

  
    ```shell
    git clone https://github.com/Azure-Samples/Verified-Telemetry-Arduino-Sample.git --recursive
    ```

3. Hardware

    > * ESP8266 Board.
    > * USB 2.0 A male to Micro USB male cable
    > * 1 * SPS30 Sensor(Digital Sensor)

## Sensor Configuration
